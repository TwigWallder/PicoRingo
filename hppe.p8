pico-8 cartridge // http://www.pico-8.com
version 34
__lua__
--hppe adventure
--by twigwallder v0.1.0

function _init()
	create_player()
end

function _update()
	player_movement()
	update_camera()
end

function _draw()
	cls()
	draw_map()
	draw_player()
	draw_ui()
end


-->8
--map

function draw_map()
	map(0,0,0,0,128,64)
end

function check_flag(flag,x,y)
 local sprite=mget(x,y)
 return fget(sprite,flag)
end

function update_camera()
	camx=flr(p.x/16)*16
	camy=flr(p.y/16)*16
	camera(camx*8,camy*8)
end

function next_tile(x,y)
	sprite=mget(x,y)
	mset(x,y,sprite+1)
end

function pick_up_key(x,y)
	next_tile(x,y)
	p.keys+=1
	sfx(0)
end

function open_door(x,y)
	next_tile(x,y)
	p.keys-=1
	sfx(1)
end

--i made this for learning
function useless_camera()
 camx=mid(0,p.x-7.5,31-15)
 camy=mid(0,p.y-7.5,31-15)
	camera(camx*8,camy*8)
end
-->8
--player

function create_player()
p={
	x=6,
	y=4,
	sprite=16,
	keys=0}
end

function player_movement()
	newx=p.x
	newy=p.y
	if (btnp(➡️)) newx+=1
	if (btnp(⬅️)) newx-=1
	if (btnp(⬇️)) newy+=1
	if (btnp(⬆️)) newy-=1
	
	interact(newx,newy)
	
	if not check_flag(0,newx,newy) then
		p.x=mid(0,newx,127)
		p.y=mid(0,newy,63)
	end
end

function interact(x,y)
	if check_flag(1,x,y) then
		pick_up_key(x,y)
		elseif check_flag(2,x,y)
	 and p.keys>0 then
			open_door(x,y)
	end
end

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
end
-->8
--ui

function draw_ui()
	camera()
	palt(0,false)
	palt(12,true)
	spr(32,2,2)
	palt()
	print_outline("X"..p.keys,3,12)
end

function print_outline(text,y,x)
	print(text,x-1,y,0)
	print(text,x+1,y,0)
	print(text,x,y-1,0)
	print(text,x,y+1,0)
	print(text,x,y,7)
end
-->8
--messages

function init_msg()
	messages={}
end

create_msg("hppe","bonjour","bye")

function create_message(name,...)
	msg_title=name
	message={...}
end
__gfx__
000000003333333333333333333333333333333333bbbb3311111111444444444444444466666666666666660000000000000000000000000000000000000000
000000003333333333a333333333333333333b333bbaabb311111111444444444ffffff466666666565555650000000000000000000000000000000000000000
00700700333333333a9a3333333333333bb33b333bbbab1311111111cccccccc4444444466666666565555650000000000000000000000000000000000000000
000770003333333333a333333333733333bb33333bbbb31311111111111111114f444f4466666666666666660000000000000000000000000000000000000000
00077000333333333333a33333379733333b3333313b331311111111111111114ffffff466666666555655550000000000000000000000000000000000000000
0070070033333333333a9a3337337333333333333311113311111111111111114444f44466666666555655550000000000000000000000000000000000000000
00000000333333333333a33379733333333333333332233311111111111111114ffffff466666666666666660000000000000000000000000000000000000000
00000000333333333333333337333333333333333314423311111111111111114444444466666666655556550000000000000000000000000000000000000000
01111800000000006666666666666666333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8811f8800000000066666aa660066666399999930000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1fbffa10000000006666a11a60606006344444430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
81ffff1000000000aaaaa66a60606006342242430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8122221000000000a1a11aa166666666344444430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02888800000000001616611660606006332332330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02dddd00000000006666666660066066334334330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02100100000000006666666660606006333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc000000003333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
caaccccc0000000033333aa333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a00acccc000000003333a11a33000033000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
accaaaaa00000000aaaaa33a30033033000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aa00a0a00000000a1a11aa133033303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c00cc0c0000000001313311333300033000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc000000003333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc000000003333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001444444114420001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004405050444520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000009405050495520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000009444444495420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004444441444420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000009444446494420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000009424444494200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004224242442000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000010101000001000000000000000200000000000000000000000000000002000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0505050505010505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505010101010105050505050505010105050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101050505050505010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505010104011401030101010505050501010102010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0501010101010103010101010122050501010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0501010101010101010201010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050101010102020101010101040101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050101010101010101010101010101010107070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0507070707070707070707080707070707070706060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0706060606060606060606080606060606060606060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0606060606060606060606080606060606060606060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0606060606060606060606080606060606010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0606010101010101010101010a0a0a0a0a010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050101010101010101010a0a0a0909090a010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050101010101010101013209090909120a010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050501010101040101010a0a0a0a0a0a0a010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050101010101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050500000000000000180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050500000000000101000001000100010101000101010001010100000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050500000004000100000001000100010000000100000001000000000100000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0500000000000000000101010001010100010100000101000001010100000100000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0500000000000000000000010001000100010000000100000000000100000101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000101010001000100010101000101010001010100000100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000500000f55012550155500000000000255502555025550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000d000000000126201c6201e60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
